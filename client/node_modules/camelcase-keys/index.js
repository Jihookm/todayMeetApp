'use strict';
const mapObj = require('map-obj');
const camelCase = require('camelcase');
const QuickLru = require('quick-lru');

<<<<<<< HEAD
<<<<<<< HEAD
const has = (arr, key) => arr.some(x => typeof x === 'string' ? x === key : x.test(key));
const cache = new QuickLru({maxSize: 100000});

const camelCaseConvert = (input, opts) => {
	opts = Object.assign({
		deep: false
	}, opts);

	const exclude = opts.exclude;

	return mapObj(input, (key, val) => {
		if (!(exclude && has(exclude, key))) {
			if (cache.has(key)) {
				key = cache.get(key);
			} else {
				const ret = camelCase(key);

				if (key.length < 100) { // Prevent abuse
					cache.set(key, ret);
=======
const has = (array, key) => array.some(x => {
	if (typeof x === 'string') {
		return x === key;
	}

	x.lastIndex = 0;
	return x.test(key);
});

=======
const has = (arr, key) => arr.some(x => typeof x === 'string' ? x === key : x.test(key));
>>>>>>> 3aa3ad78 (re)
const cache = new QuickLru({maxSize: 100000});

const camelCaseConvert = (input, opts) => {
	opts = Object.assign({
		deep: false
	}, opts);

	const exclude = opts.exclude;

	return mapObj(input, (key, val) => {
		if (!(exclude && has(exclude, key))) {
			if (cache.has(key)) {
				key = cache.get(key);
			} else {
				const ret = camelCase(key);

				if (key.length < 100) { // Prevent abuse
<<<<<<< HEAD
					cache.set(cacheKey, ret);
>>>>>>> 5387c5b8 (adding redux)
=======
					cache.set(key, ret);
>>>>>>> 3aa3ad78 (re)
				}

				key = ret;
			}
		}

<<<<<<< HEAD
<<<<<<< HEAD
		return [key, val];
	}, {deep: opts.deep});
};

module.exports = (input, opts) => {
	if (Array.isArray(input)) {
		return Object.keys(input).map(key => camelCaseConvert(input[key], opts));
	}
	return camelCaseConvert(input, opts);
};

=======
		return [key, value];
	};

	return mapObj(input, makeMapper(undefined));
=======
		return [key, val];
	}, {deep: opts.deep});
>>>>>>> 3aa3ad78 (re)
};

module.exports = (input, opts) => {
	if (Array.isArray(input)) {
		return Object.keys(input).map(key => camelCaseConvert(input[key], opts));
	}
	return camelCaseConvert(input, opts);
};
<<<<<<< HEAD
>>>>>>> 5387c5b8 (adding redux)
=======

>>>>>>> 3aa3ad78 (re)
